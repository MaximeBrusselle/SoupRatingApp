<mvc:View
    controllerName="soupapp.controller.Detail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.uxap"
    xmlns:m="sap.m"
    displayBlock="true"
    height="100%"
    busyIndicatorDelay="0"
>
    <ObjectPageLayout
        id="idObjectPageLayout"
        showTitleInHeaderContent="true"
        upperCaseAnchorBar="false"
    >
        <headerTitle>
            <ObjectPageDynamicHeaderTitle id="idObjectPageDynamicHeaderTitle">
                <expandedHeading>
                    <m:Title
                        id="idNameDetailTitle"
                        text="{name}"
                        wrapping="true"
                    />
                </expandedHeading>

                <snappedHeading>
                    <m:VBox id="idVBox">
                        <m:Title
                            id="idNameDetailSnappedTitle"
                            text="{name}"
                            wrapping="true"
                        />
                        <m:Label
                            id="idShortDescrDetailLabel"
                            text="{shortDescr}"
                        />
                    </m:VBox>
                </snappedHeading>

                <expandedContent>
                    <m:Label
                        id="idShortDescrDetailExpandedLabel"
                        text="{shortDescr}"
                    />
                </expandedContent>

                <snappedTitleOnMobile>
                    <m:Title
                        id="idNameMobileTitle"
                        text="{name}"
                    />
                </snappedTitleOnMobile>

                <actions>
                    <m:Button
                        id="idEditButton"
                        text="Edit"
                        type="Emphasized"
                    />
                    <m:Button
                        id="idDeleteButton"
                        text="Delete"
                        press="onDeleteButtonPress"
                    />
                    <m:Button
                        id="idCopyButton"
                        text="Copy"
                        press="onCopyButtonPress"
                    />
                    <m:OverflowToolbarButton
                        id="idShareOverflowToolbarButton"
                        icon="sap-icon://action"
                        type="Transparent"
                        text="Share"
                        tooltip="action"
                    />
                </actions>
            </ObjectPageDynamicHeaderTitle>
        </headerTitle>

        <headerContent>
            <m:FlexBox
                id="idFlexBox"
                wrap="Wrap"
                fitContainer="true"
            >
                <m:VBox
                    id="id3VBox"
                    class="sapUiLargeMarginEnd sapUiSmallMarginBottom"
                >
                    <m:Title
                        id="idSoupDetailsTitle"
                        class="sapUiTinyMarginBottom"
                        text="Soup Details"
                    />

                    <m:HBox
                        id="id2HBox"
                        class="sapUiTinyMarginBottom"
                        renderType="Bare"
                    >
                        <m:Label
                            id="idDateServedLabel"
                            text="Date Served:"
                            class="sapUiTinyMarginEnd"
                        />
                        <m:Text
                            id="idDateText"
                            text=" {date}"
                        />
                    </m:HBox>

                    <m:HBox
                        id="id3HBox"
                        class="sapUiTinyMarginBottom"
                        renderType="Bare"
                    >
                        <m:Label
                            id="idVeggieLabel"
                            text="Veggie:"
                            class="sapUiTinyMarginEnd"
                        />
                        <m:ObjectStatus
                            id="idObjectStatus"
                            text="{= ${isVeggie} > 0 ? 'Yes' : 'No'}"
                            state="{= ${isVeggie} > 0 ? 'Success' : 'Error'}"
                        />
                    </m:HBox>

                    <m:HBox id="id4HBox">
                        <m:Label
                            id="idSpicyLabel"
                            text="Spicy:"
                            class="sapUiTinyMarginEnd"
                        />
                        <m:ObjectStatus
                            id="id2ObjectStatus"
                            text="{= ${isSpicy} > 0 ? 'Yes' : 'No'}"
                            state="{= ${isSpicy} > 0 ? 'Success' : 'Error'}"
                        />
                    </m:HBox>
                </m:VBox>

                <m:VBox
                    id="id4VBox"
                    class="sapUiLargeMarginEnd sapUiSmallMarginBottom"
                >
                    <m:HBox
                        id="id5HBox"
                        class="sapUiTinyMarginBottom"
                    >
                        <m:Label
                            id="idCreatedByLabel"
                            text="Created By:"
                            class="sapUiSmallMarginEnd"
                        />
                        <m:Text
                            id="idCreatedByText"
                            text="{createdBy}"
                        />
                    </m:HBox>

                    <m:HBox
                        id="id6HBox"
                        class="sapUiTinyMarginBottom"
                        renderType="Bare"
                    >
                        <m:Label
                            id="idCreatedOnLabel"
                            text="Created On:"
                            class="sapUiSmallMarginEnd"
                        />
                        <m:Text
                            id="idCreatedOnText"
                            text=" {createdAt}"
                        />
                    </m:HBox>

                    <m:HBox
                        id="id7HBox"
                        class="sapUiTinyMarginBottom"
                    >
                        <m:Label
                            id="idChangedByLabel"
                            text="Changed By:"
                            class="sapUiSmallMarginEnd"
                        />
                        <m:Text
                            id="idModifiedByText"
                            text="{modifiedBy}"
                        />
                    </m:HBox>

                    <m:HBox
                        id="id8HBox"
                        renderType="Bare"
                    >
                        <m:Label
                            id="idChangedOnLabel"
                            text="Changed On:"
                            class="sapUiSmallMarginEnd"
                        />
                        <m:Text
                            id="idModifiedAtText"
                            text=" {modifiedAt}"
                        />
                    </m:HBox>
                </m:VBox>

                <m:VBox
                    id="id5VBox"
                    class="sapUiLargeMarginEnd sapUiSmallMarginBottom"
                >
                    <m:Title
                        id="idDescriptionTitle"
                        text="Description"
                        class="sapUiTinyMarginBottom"
                    />
                    <m:Text
                        id="idLongDescrText"
                        width="320px"
                        text="{= ${longDescr} || 'No Description Provided'}"
                    />
                </m:VBox>

                <m:VBox
                    id="id6VBox"
                    class="sapUiLargeMarginEnd sapUiSmallMarginBottom"
                >
                    <m:Title
                        id="idAverageRatingRatingsCountRatingsTitle"
                        class="sapUiTinyMarginBottom"
                        text="Average Rating ({ratingsCount} ratings)"
                    />
                    <m:RatingIndicator
                        id="idAvgRatingDetailRatingIndicator"
                        class="sapUiSmallMarginBottom"
                        value="{avgRating}"
                        tooltip="Rating Tooltip"
                        displayOnly="true"
                        iconSize="32px"
                    />
                </m:VBox>
            </m:FlexBox>
        </headerContent>
        <sections>
            <ObjectPageSection
                id="idObjectPageSection"
                anchorBarButtonColor="Positive"
                titleUppercase="false"
                title="Ingredients"
            >
                <subSections>
                    <ObjectPageSubSection id="idObjectPageSubSection">
                        <blocks>
                            <m:Table
                                id="idIngredientsDetailTable"
                                items="{ingredients}"
                            >
                                <m:columns>
                                    <m:Column
                                        minScreenWidth="Tablet"
                                        demandPopin="true"
                                        id="idNameColumn"
                                    >
                                        <m:Text
                                            text="Name"
                                            id="idNameText"
                                        />
                                    </m:Column>
                                    <m:Column
                                        minScreenWidth="Tablet"
                                        demandPopin="true"
                                        id="idQuantityColumn"
                                    >
                                        <m:Text
                                            text="Quantity"
                                            id="idQuantityText"
                                        />
                                    </m:Column>
                                    <m:Column
                                        minScreenWidth="Tablet"
                                        demandPopin="true"
                                        id="idUOMColumn"
                                    >
                                        <m:Text
                                            text="UOM"
                                            id="idUOMText"
                                        />
                                    </m:Column>
                                </m:columns>

                                <m:items>
                                    <m:ColumnListItem
                                        vAlign="Middle"
                                        id="id2ColumnListItem"
                                    >
                                        <m:cells>
                                            <m:Text
                                                text="{name}"
                                                id="idName2Text"
                                            />
                                            <m:Text
                                                text="{quantity}"
                                                id="idQuantity2Text"
                                            />
                                            <m:Text
                                                text="{uom}"
                                                id="idUomText"
                                            />
                                        </m:cells>
                                    </m:ColumnListItem>
                                </m:items>
                            </m:Table>
                        </blocks>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>
            <ObjectPageSection
                id="id2ObjectPageSection"
                anchorBarButtonColor="Critical"
                titleUppercase="false"
                title="Reviews"
            >
                <subSections>
                    <ObjectPageSubSection id="id2ObjectPageSubSection">
                        <blocks>
                            <m:VBox id="id7VBox">
                                <m:FeedInput
                                    id="idFeedInput"
                                    post="onFeedInputPost"
                                    icon="test-resources/sap/m/images/dronning_victoria.jpg"
                                    class="sapUiSmallMarginTopBottom"
                                    maxLength="111"
                                    showExceededText="true"
                                />
                                <m:List
                                    id="idRatingsList"
                                    showSeparators="Inner"
                                    items="{
                                        path: 'ratings',
                                        parameters: {$orderby: 'createdAt desc'}
                                    }"
                                    noDataText="No Ratings Yet"
                                >
                                    <m:FeedListItem
                                        id="idCommentFeedListItem"
                                        sender="{createdBy}"
                                        info="Review"
                                        timestamp="{createdAt}"
                                        text="{parts: [{path: 'comment'}, {path: 'rating'}], formatter: '.ratingTextFormatter'}"
                                        convertLinksToAnchorTags="All"
                                    />
                                </m:List>
                            </m:VBox>
                        </blocks>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>
        </sections>
    </ObjectPageLayout>
</mvc:View>
